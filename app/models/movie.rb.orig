class Movie < ActiveRecord::Base
	has_many :reviews
  has_many :movie_genres
  has_many :genres, through: :movie_genres

	validates :title, presence: true, uniqueness: true
	validates :synopsis, presence: true
	validates :release_date, presence: true
	validates :director, presence: true

<<<<<<< HEAD
	def self.sort
		Movie.all.sort_by {|movie| movie.reviews.count * -1}
=======
	def composite_score
		reviews.map(&:rating).reduce(:+) / reviews.count
>>>>>>> 321abf4c13364d3fc105935fe7258e9a0da9977d
	end

end
